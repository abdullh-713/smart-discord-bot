import os
import discord
from discord.ext import commands
from discord import app_commands

# ุงุณุชุฎุฏู ุงูุชููู ูู ูุชุบูุฑ ุงูุจูุฆุฉ
TOKEN = os.getenv("TOKEN")

intents = discord.Intents.default()
bot = commands.Bot(command_prefix="!", intents=intents)
tree = bot.tree

# ุงูุนููุงุช ุงููุชููุฑุฉ
symbols = [
    "EURUSD_otc", "GBPUSD_otc", "USDJPY_otc", "AUDCAD_otc", "NZDUSD_otc",
    "EURJPY_otc", "GBPJPY_otc", "AUDCHF_otc", "EURGBP_otc", "EURNZD_otc"
]

# ุงููุฑููุงุช ุงููุชููุฑุฉ
timeframes = ["5s", "15s", "30s", "1m", "2m", "3m", "5m"]

# ูุงุนุฏุฉ ุจูุงูุงุช ุงูุซุบุฑุงุช ุงูุญููููุฉ ุงููุฌุฑุจุฉ
THAGHRAT = {
    "EURUSD_otc": {
        "5s":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 20 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ูุจูุท ๐ป", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 45 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 25 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ูุจูุท ๐ป", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 55 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "GBPUSD_otc": {
        "5s":  {"decision": "ูุจูุท ๐ป", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 10 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ุตุนูุฏ ๐ผ", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 50 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ูุจูุท ๐ป", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 00 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 30 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "USDJPY_otc": {
        "5s":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 05 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ูุจูุท ๐ป", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 30 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 10 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ูุจูุท ๐ป", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 45 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "AUDCAD_otc": {
        "5s":  {"decision": "ูุจูุท ๐ป", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 15 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ุตุนูุฏ ๐ผ", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 40 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ูุจูุท ๐ป", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 20 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 50 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "NZDUSD_otc": {
        "5s":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 00 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ูุจูุท ๐ป", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 25 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 15 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ูุจูุท ๐ป", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 35 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "EURJPY_otc": {
        "5s":  {"decision": "ูุจูุท ๐ป", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 12 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ุตุนูุฏ ๐ผ", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 18 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ูุจูุท ๐ป", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 28 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 03 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "GBPJPY_otc": {
        "5s":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 07 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ูุจูุท ๐ป", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 33 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 17 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ูุจูุท ๐ป", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 47 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "AUDCHF_otc": {
        "5s":  {"decision": "ูุจูุท ๐ป", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 22 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ุตุนูุฏ ๐ผ", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 36 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ูุจูุท ๐ป", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 08 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 42 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "EURGBP_otc": {
        "5s":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 02 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ูุจูุท ๐ป", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 28 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 12 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ูุจูุท ๐ป", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 38 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    },
    "EURNZD_otc": {
        "5s":  {"decision": "ูุจูุท ๐ป", "duration": "30 ุซุงููุฉ", "entry": "ุงูุซุงููุฉ 09 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "15s": {"decision": "ุตุนูุฏ ๐ผ", "duration": "1 ุฏูููุฉ", "entry": "ุงูุซุงููุฉ 43 ูู ุงูุฏูููุฉ ุงูุญุงููุฉ"},
        "1m":  {"decision": "ูุจูุท ๐ป", "duration": "2 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 05 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"},
        "3m":  {"decision": "ุตุนูุฏ ๐ผ", "duration": "3 ุฏูุงุฆู", "entry": "ุงูุฏูููุฉ 30 ูู ุงูุณุงุนุฉ ุงูุญุงููุฉ"}
    }
}

# ุฃูุฑ Discord ูุฅุฑุณุงู ุงูุฅุดุงุฑุฉ
@tree.command(name="start", description="ุงุญุตู ุนูู ุฅุดุงุฑุฉ ูุจููุฉ ุนูู ุซุบุฑุงุช OTC")
@app_commands.describe(symbol="ุงุฎุชุฑ ุงูุนููุฉ", timeframe="ุงุฎุชุฑ ุงููุฑูู ุงูุฒููู")
@app_commands.choices(
    symbol=[app_commands.Choice(name=s, value=s) for s in symbols],
    timeframe=[app_commands.Choice(name=t, value=t) for t in timeframes]
)
async def start(interaction: discord.Interaction, symbol: app_commands.Choice[str], timeframe: app_commands.Choice[str]):
    await interaction.response.defer()
    data = THAGHRAT.get(symbol.value, {}).get(timeframe.value)

    if data:
        msg = (
            f"๐ ุงูุนููุฉ: `{symbol.value}`\n"
            f"๐ ุงููุฑูู: `{timeframe.value}`\n\n"
            f"๐ ุงููุฑุงุฑ: **{data['decision']}**\n"
            f"๐ ูุฏุฉ ุงูุตููุฉ: **{data['duration']}**\n"
            f"โฐ ููุช ุงูุฏุฎูู: **{data['entry']}**"
        )
    else:
        msg = "โ๏ธ ูุง ุชูุฌุฏ ุซุบุฑุฉ ูุฎุตุตุฉ ููุฐู ุงูุนููุฉ ูุงููุฑูู ุญุงููุงู."

    await interaction.followup.send(msg)

# ุชุดุบูู ุงูุจูุช
@bot.event
async def on_ready():
    await tree.sync()
    print(f"โ Logged in as {bot.user}")

bot.run(TOKEN)
